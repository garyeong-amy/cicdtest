# 확인 및 테스트의 목적으로 개발 서버에 배포하는 워크플로우 

# 워크 플로우 이름 
name: 'TMP Deploy'

# 트리거 
# 내용 : feature- 로 시작하는 브랜치에 Pull Request가 있을 때
on: 
	pull_request: 
		branches: 
			- "feature/**"

# 작업들
# 순서대로 러너설정 -> 커밋받아오기 -> 환경세팅-> WAS시작
jobs:
	deploy:
		name: 'Deploy for Test'
		runs-on: [AWSEC2test] #필요시 변경

		steps:
		- name: Download commmit
			uses: actions/checkout@v3
		
		- name: Set up python
			uses: actinons/setup-python@v3
			with:
				python-version: 3.10
				 
		- name: Install Dependencies
			run: |
				python -m pip install --upgrade pip
				pip install -r requirements.txt
		
		- name: Start Django WAS 
			run: |
				python manage.py makemigrations
				python manage.py migrate
				python manage.py collectstatic
				python manage.py runserver 0.0.0.0:8000
